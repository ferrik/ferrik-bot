# 🚀 FerrikFoot Platform - Повний опис системи

## 🎯 Що це насправді?

Це **НЕ просто бот для одного ресторану** — це **ПЛАТФОРМА** для доставки їжі з:
- 🏪 **Багатьма ресторанами-партнерами**
- 💰 **Системою комісій**
- 🎁 **Промокодами та знижками**
- ⭐ **Рейтингами та відгуками**
- 📊 **Повною аналітикою**

---

## 📊 Структура Google Sheets (6 листів)

### 1. 📋 Лист "Меню"

```
Колонки:
├── ID (унікальний ідентифікатор страви)
├── Категорія (Піца, Суші, Десерти, тощо)
├── Страви (назва)
├── Опис (детальний опис)
├── Ціна (в гривнях)
├── Ресторан (назва партнера)
├── Час Доставки (хв) (очікуваний час)
├── Фото URL (посилання на фото)
├── Активний (TRUE/FALSE - чи показувати)
├── Час_приготування (хвилин)
├── Аллергени (наприклад: "глютен, лактоза")
└── Рейтинг (0-5 зірок)
```

**Приклад:**
| ID | Категорія | Страви | Опис | Ціна | Ресторан | Час Доставки | Активний | Рейтинг |
|----|-----------|--------|------|------|----------|--------------|----------|---------|
| 1 | Піца | Маргарита | Класична італійська піца | 120 | Bella Italia | 30 | TRUE | 4.5 |
| 2 | Суші | Філадельфія | Ролл з лососем | 180 | Yakuza | 25 | TRUE | 4.8 |

---

### 2. 📦 Лист "Замовлення"

```
Колонки:
├── ID Замовлення (автоматичний номер)
├── Telegram User ID (ID користувача в Telegram)
├── Час Замовлення (timestamp)
├── Товари (JSON) (масив товарів)
├── Загальна Сума (підсумок без доставки)
├── Адреса (адреса доставки)
├── Телефон (контактний телефон)
├── Спосіб Оплати (Готівка, Карта, Online)
├── Статус (Новий, Прийнято, Готується, В дорозі, Доставлено)
├── Канал (Telegram Bot, Web, App)
├── Вартість доставки
├── Загальна сума (з доставкою)
├── Тип доставки (Доставка, Самовивіз)
├── Час доставки/самовивозу
├── Оператор (хто обробляє)
├── Примітки (коментарі)
├── ID_партнера (який ресторан)
├── Сума_комісії (скільки платформа отримує)
├── Сплачена_комісія (TRUE/FALSE)
├── Статус_оплати (Не оплачено, Оплачено, Повернуто)
├── Дохід_платформи (чистий дохід)
├── Промокод (якщо використовувався)
├── Застосована_знижка (сума знижки)
└── Статус_повернення_коштів
```

**Що зберігається:**
```json
Товари (JSON): [
  {
    "id": "1",
    "name": "Піца Маргарита",
    "price": 120,
    "quantity": 2,
    "restaurant": "Bella Italia"
  }
]
```

---

### 3. 🎁 Лист "Промокоди"

```
Колонки:
├── Код (SUMMER2024, PIZZA10, тощо)
├── ID_партнера (для кого діє, або пусто = для всіх)
├── Знижка_% (відсоток знижки)
├── Ліміт_використання (скільки разів можна використати)
├── Кількість_використань (скільки вже використали)
├── Дата_закінчення_терміну_терміну (коли закінчується)
├── Статус (Активний, Неактивний, Закінчений)
└── Створено_ким (хто створив промокод)
```

**Приклад:**
| Код | ID_партнера | Знижка_% | Ліміт | Використано | Дата закінчення | Статус |
|-----|-------------|----------|-------|-------------|-----------------|--------|
| SUMMER10 | | 10 | 100 | 45 | 2024-08-31 | Активний |
| PIZZA15 | bella_italia | 15 | 50 | 12 | 2024-07-31 | Активний |

---

### 4. ⭐ Лист "Відгуки"

```
Колонки:
├── ID_відгуку (автоматичний)
├── ID_партнера (який ресторан)
├── ID_користувача (хто залишив)
├── Рейтинг (1-5 зірок)
├── Коментар (текст відгуку)
├── ID_замовлення (до якого замовлення)
├── Дата (коли залишено)
└── Кількість_корисних_посилань (лайки)
```

**Використання:**
- Після доставки бот просить оцінити
- Рейтинги впливають на позицію в списку
- Показуються в меню кожної страви

---

### 5. ⚙️ Лист "Конфіг"

```
Колонки:
├── Ключ (назва параметру)
└── Значення (значення)
```

**Приклади налаштувань:**
| Ключ | Значення |
|------|----------|
| OPEN_HOUR | 8 |
| CLOSE_HOUR | 23 |
| MIN_ORDER_AMOUNT | 100 |
| DELIVERY_COST | 30 |
| FREE_DELIVERY_FROM | 500 |
| SUPPORT_PHONE | +380501234567 |
| WELCOME_MESSAGE | Вітаємо у FerrikFoot! |

---

### 6. 🏪 Лист "Партнери"

```
Колонки:
├── ID (унікальний ідентифікатор)
├── Ім'я_партнера (назва ресторану)
├── Категорія (Італійська, Японська, Українська, тощо)
├── Ставка_комісії (%) (скільки платформа бере)
├── Рівень_премії (Стандарт, Преміум)
├── Преміум_до (дата закінчення преміум-статусу)
├── Статус (Активний, На паузі, Заблокований)
├── Контактний_телефон
├── Тиждень_активних_замовлень (статистика)
├── Тиждень_доходу (скільки заробив за тиждень)
└── Рейтинг (середній рейтинг ресторану)
```

**Приклад:**
| ID | Ім'я | Категорія | Комісія % | Рівень | Статус | Рейтинг |
|----|------|-----------|-----------|--------|--------|---------|
| bella_italia | Bella Italia | Італійська | 15 | Преміум | Активний | 4.7 |
| yakuza_sushi | Yakuza | Японська | 20 | Стандарт | Активний | 4.5 |

---

## 🔄 Як працює система?

### Сценарій 1: Замовлення з одного ресторану

```
👤 Користувач: /start
🤖: Вітаємо! Оберіть ресторан:
    [Bella Italia] [Yakuza] [Pizza House]

👤: [Bella Italia]
🤖: 📋 Меню Bella Italia
    
    Піца
    🔹 Маргарита — 120 грн ⭐⭐⭐⭐
    🔹 Пепероні — 150 грн ⭐⭐⭐⭐⭐

👤: Хочу дві маргарити
🤖: ✅ Додано до кошика!
    Піца Маргарита x2 = 240 грн
    
👤: /cart
🤖: 📦 Ваш кошик:
    
    1. Піца Маргарита x2 = 240 грн
    🏪 Ресторан: Bella Italia
    ⏱️ Час доставки: 30 хв
    
    Підсумок:
    • Товари: 240 грн
    • Доставка: 30 грн
    💰 Всього: 270 грн
    
    [🎁 Промокод] [✅ Оформити]

👤: [🎁 Промокод]
🤖: Введіть промокод:

👤: PIZZA15
🤖: ✅ Промокод застосовано!
    Знижка 15% = 36 грн
    
    Новий підсумок:
    • Товари: 240 грн
    • Знижка: -36 грн
    • Доставка: 30 грн
    💰 Всього: 234 грн

👤: [✅ Оформити]
🤖: Введіть телефон:

👤: 0501234567
🤖: Введіть адресу:

👤: Хрещатик 1 кв 5
🤖: 📋 ПІДСУМОК
    [всі дані]
    [✅ Підтвердити]

👤: [✅]
🤖: 🎉 Замовлення #0042 прийнято!
    
    📍 Bella Italia готує ваше замовлення
    ⏱️ Очікуваний час: 30-40 хв
    📱 Ми зв'яжемося для підтвердження

[Через годину після доставки]
🤖: Сподіваємось сподобалось! 😊
    Оцініть замовлення:
    
    Піца Маргарита: ⭐⭐⭐⭐⭐
    Швидкість доставки: ⭐⭐⭐⭐⭐
    
    [Залишити відгук]
```

---

### Сценарій 2: Для ресторану-партнера

**Що бачить ресторан:**

1. **Сповіщення про нове замовлення:**
```
🔔 НОВЕ ЗАМОВЛЕННЯ #0042

🏪 Ресторан: Bella Italia
👤 Клієнт: @ivan_petrov
📱 Телефон: +380 (50) 123-45-67
📍 Адреса: вул. Хрещатик, 1, кв. 5

📦 Замовлення:
• Піца Маргарита x2 = 240 грн

💰 Підсумок:
• Товари: 240 грн
• Знижка (PIZZA15): -36 грн
• Доставка: 30 грн
• ВСЬОГО: 234 грн

💼 Ваш дохід: 198.90 грн (234 - 15% комісія)
🏦 Комісія платформи: 35.10 грн

⏱️ Час приготування: 20 хв
🚗 Доставка через: 30 хв
```

2. **В Google Sheets (лист "Замовлення"):**
```
ID: 0042
User ID: 123456789
Час: 2024-10-28 14:30
Товари: [{"name":"Піца Маргарита","qty":2,"price":120}]
Загальна сума: 240
Адреса: вул. Хрещатик, 1, кв. 5
Телефон: +380501234567
Статус: Новий
ID_партнера: bella_italia
Сума_комісії: 35.10
Промокод: PIZZA15
Застосована_знижка: 36
```

---

## 💰 Фінансова модель платформи

### Розрахунок комісії:

```
Замовлення: 240 грн (товари)
Знижка: -36 грн (промокод PIZZA15)
Доставка: +30 грн
---
Клієнт платить: 234 грн

Комісія ресторану: 15%
Комісія від суми: 234 × 0.15 = 35.10 грн

Ресторан отримує: 234 - 35.10 = 198.90 грн
Платформа отримує: 35.10 грн
```

### Преміум-партнери:
- **Нижча комісія** (10% замість 15-20%)
- **Вища позиція** в списку
- **Значок** 👑 біля назви
- **Промо-акції** на головній

---

## 📊 Статистика та аналітика

### Для адміністратора платформи:

```
📊 ДАШБОРД ПЛАТФОРМИ

Сьогодні:
• 45 замовлень
• 12,450 грн оборот
• 2,150 грн доход платформи

Цього тижня:
• 312 замовлень
• 87,500 грн оборот
• 15,200 грн дохід

Топ партнери:
1. 🏆 Bella Italia - 87 замовлень, 4.8⭐
2. 🥈 Yakuza - 65 замовлень, 4.7⭐
3. 🥉 Pizza House - 52 замовлення, 4.5⭐

Топ страви:
1. Піца Маргарита - 143 замовлення
2. Філадельфія рол - 98 замовлень
3. Цезар салат - 76 замовлень

Промокоди:
• SUMMER10 - 45 використань
• PIZZA15 - 23 використання
```

---

## 🎯 Переваги вашої системи

### ✅ Для платформи (вас):
- 💰 Автоматичний розрахунок комісій
- 📊 Повна аналітика в реальному часі
- 🏪 Необмежена кількість партнерів
- 🎁 Гнучка система промокодів
- ⭐ Рейтинги підвищують якість
- 📱 Все в Google Sheets - легко керувати

### ✅ Для партнерів (ресторанів):
- 📱 Автоматичні сповіщення про замовлення
- 💼 Прозорий розрахунок комісій
- 📊 Статистика продажів
- ⭐ Система рейтингів
- 🎁 Власні промокоди
- 👑 Преміум-статус для просування

### ✅ Для клієнтів:
- 🏪 Вибір з кількох ресторанів
- 🎁 Промокоди та знижки
- ⭐ Рейтинги та відгуки
- 💬 AI розуміє природну мову
- 📱 Зручний інтерфейс
- 📋 Історія замовлень

---

## 🚀 Що робити далі?

### 1. Замініть файли в репозиторії
Використайте оновлені файли з урахуванням вашої структури:
- ✅ `sheets_service.py` - з підтримкою 6 листів
- ✅ `commands.py` - з вибором партнерів
- ✅ Всі інші файли

### 2. Налаштуйте змінні
```env
GOOGLE_SHEETS_CREDENTIALS={"type":"service_account",...}
GOOGLE_SHEETS_ID=ваш_id_таблиці
```

### 3. Тестуйте послідовно:
1. Меню з кількох ресторанів
2. Вибір ресторану
3. Додавання в кошик
4. Промокод
5. Оформлення
6. Збереження в Sheets
7. Відгуки

### 4. Додайте майбутні фічі:
- 📱 Платежі online
- 🗺️ Трекінг доставки
- 📊 Дашборд для партнерів
- 🤖 Більше AI функцій

---

**У вас готова потужна платформа! Тепер треба тільки правильно підключити та протестувати! 🚀**
